if(NOT DEFINED ENV{DESTDIR})
  find_program(XDG_ICON_RESOURCE xdg-icon-resource)
  if (XDG_ICON_RESOURCE)
    message(STATUS "Updating icon cache")
    execute_process(COMMAND ${XDG_ICON_RESOURCE} forceupdate --theme hicolor)
  else()
    message(WARNING "Cannot update icon cache: xdg-icon-resource not found")
  endif()
else()
  message(STATUS "make install run with DESTDIR=$ENV{DESTDIR}, skip updating icon cache")
endif()